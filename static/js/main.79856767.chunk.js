(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{106:function(e,t,a){},111:function(e,t,a){e.exports=a(278)},116:function(e,t,a){},117:function(e,t,a){},118:function(e,t,a){},136:function(e,t,a){},278:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(108),c=a.n(o),i=(a(116),a(3)),s=a(4),l=a(6),u=a(5),m=a(7),d=(a(117),a(23)),v=a(17),h=(a(118),a(9)),p=a.n(h),f=(a(136),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).formatDate=function(e){var t=new Date(e);return["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()]+" "+t.getFullYear()},a.state={isChecked:!1},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("section",{className:"MovieCard"},r.a.createElement("div",null,r.a.createElement("img",{src:this.props.image,alt:this.props.name,className:"searchIcon"})),r.a.createElement("div",null,r.a.createElement("button",{type:"button",className:"button searchAdd",onClick:function(){e.props.addMovieCallback(e.props)}},"Add"),r.a.createElement("h3",{className:"searchMovieTitle"},this.props.title),r.a.createElement("p",{className:"searchDate"},this.formatDate(this.props.releaseDate)),r.a.createElement("p",{className:"searchOverview"},this.props.overview)))}}]),t}(r.a.Component)),b=(a(137),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).searchDatabase=function(e){a.resetNotification(),p.a.get("https://video-store-backend.herokuapp.com/movies?query=".concat(e)).then(function(t){a.setState({searchTerm:e,results:t.data}),a.displayResults()}).catch(function(e){console.log("error")})},a.addMovie=function(e){a.resetNotification();var t={title:e.title,overview:e.overview,release_date:e.releaseDate,image_url:e.image,external_id:e.externalId};p.a.post("https://video-store-backend.herokuapp.com/movies",t).then(function(t){a.setState({notification:!0,notifications:"success",movieToAdd:e.title}),console.log(t.data)}).catch(function(e){console.log(e.message),a.setState({notification:!0,notifications:e.message})})},a.displayNotification=function(){return"Request failed with status code 500"==a.state.notifications?r.a.createElement("p",{className:"notification error"},"This Movie is Already Added to the Rental Library"):"success"==a.state.notifications?r.a.createElement("p",{className:"notification success"},a.state.movieToAdd," Has Been Added to Rental Library"):r.a.createElement("p",{className:"notification warning"},a.state.errors)},a.resetNotification=function(){a.setState({notification:!1,notifications:[]})},a.displayResults=function(){return a.state.results.map(function(e,t){return r.a.createElement(f,{title:e.title,id:t,overview:e.overview,releaseDate:e.release_date,image:e.image_url,externalId:e.id,addMovieCallback:a.addMovie})})},a.state={searchTerm:"",results:[],notification:!1,notifications:"",movieToAdd:""},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("section",null,this.state.notification?this.displayNotification(this.state.notifications):"",r.a.createElement("div",null,r.a.createElement("label",{className:"search-bar--label",htmlFor:"searchBar"},"Search Movie Database: ")),r.a.createElement("input",{onChange:function(t){e.searchDatabase(t.target.value)},value:this.searchTerm,name:"searchBar",id:"searchBar",className:"search-bar"}),r.a.createElement("div",null,this.displayResults()))}}]),t}(r.a.Component)),E=(a(37),new Date);E.setDate((new Date).getDate()+7);var g=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).createRental=function(e,t,n){var r={customer_id:t.id,movie_id:e.id,due_date:E.toISOString()};p.a.post("https://video-store-backend.herokuapp.com/rentals/".concat(e.title,"/check-out"),r).then(function(e){a.setState({rental:e.data}),console.log(e.data),a.clearRental(),a.props.clearSelection()}).catch(function(e){a.setState({error:e.message})})},a.clearRental=function(){a.setState({rental:""})},a.showRental=function(){var e=a.props.movie?r.a.createElement("p",null,"Title: ",a.props.movie.title):"",t=a.props.customer?r.a.createElement("p",null,"Customer: ",a.props.customer.name):"",n=a.state.rental?r.a.createElement("p",null,a.state.rental):"";return r.a.createElement("div",{className:"rental-card"},r.a.createElement("div",{className:"card card-body bg-light"},r.a.createElement("p",{className:"card-header"},"New Rental"),r.a.createElement("span",null,e),r.a.createElement("span",null,t),r.a.createElement("p",null,"".concat(n)),r.a.createElement("button",{className:"btn btn-success",size:"sm",onClick:function(){a.createRental(a.props.movie,a.props.customer,a.state.dueDate)}},"Checkout Rental")))},a.state={rental:void 0,dueDate:E},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.movie||this.props.customer?r.a.createElement("p",null,this.showRental()):"";return r.a.createElement("div",null,r.a.createElement("section",null,e))}}]),t}(r.a.Component),k=function(e){var t=e.rentalId,a=e.movieTitle,n=e.customerId,o=e.customerName,c=e.checkoutDate,i=e.dueDate,s=e.checkinRental,l=new Date,u=i<(l=(l=l.toISOString()).split("T")[0])?r.a.createElement("p",{className:"badge badge-danger"},"OVERDUE"):"";return r.a.createElement("div",{className:"card-deck rental-card"},r.a.createElement("div",{className:"card bg-light"},r.a.createElement("div",{className:"card-body"},u,r.a.createElement("p",null,"Title: ",a),r.a.createElement("p",null,"Customer: ",o),r.a.createElement("p",null,"Checkout date: ",c," "),r.a.createElement("p",null,"Due date: ",i),r.a.createElement("button",{className:"btn btn-primary",size:"sm",onClick:function(){s(n,a,t)},type:"button"},"Check in Rental"))))},y=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).checkinRental=function(e,t,n){var r={customer_id:e};p.a.post("https://video-store-backend.herokuapp.com/rentals/".concat(t,"/return"),r).then(function(e){var t=a.state.rentals.filter(function(e){return e.id!==n});a.setState({rentals:t}),a.clearRental(),a.props.clearSelection()}).catch(function(e){a.setState({error:e.message})})},a.state={rentals:[],overdueRentals:void 0},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;p.a.get("https://video-store-backend.herokuapp.com/rentals").then(function(t){e.setState({rentals:t.data})}).catch(function(e){console.log("error")}),this.getOverdueRentals()}},{key:"makeRentalList",value:function(){var e=this;return this.state.rentals.map(function(t,a){return r.a.createElement(k,{key:a,movieTitle:t.title,customerId:t.customer_id,customerName:t.name,rentalId:t.id,checkoutDate:t.checkout_date,dueDate:t.due_date,checkinRental:e.checkinRental})})}},{key:"makeOverdueList",value:function(){var e=this;return void 0===this.state.overdueRentals?"":this.state.overdueRentals.map(function(t,a){return r.a.createElement(k,{key:a,movieTitle:t.title,customerId:t.customer_id,customerName:t.name,rentalId:t.id,checkoutDate:t.checkout_date,dueDate:t.due_date,checkinRental:e.checkinRental})})}},{key:"getOverdueRentals",value:function(){var e=this;p.a.get("https://video-store-backend.herokuapp.com/rentals/overdue").then(function(t){e.setState({overdueRentals:t.data})}).catch(function(e){console.log("error")})}},{key:"render",value:function(){return r.a.createElement("div",null,this.makeOverdueList(),this.makeRentalList())}}]),t}(r.a.Component),O=(a(106),function(e){return r.a.createElement("div",{className:"card-deck rental-card"},r.a.createElement("div",{className:"card bg-light"},r.a.createElement("div",{className:"card-body"},r.a.createElement("img",{className:"movie-img",src:e.image,alt:"".concat(e.title)}),r.a.createElement("p",null,e.title),r.a.createElement("p",null,e.overview),r.a.createElement("p",null,e.dateFormatting(e.releaseDate)),r.a.createElement("p",null,"Inventory Available: ",e.inventory),r.a.createElement("button",{className:"btn btn-primary",size:"sm",type:"button",onClick:function(){e.findMovie(e.id)}},"Select"))))}),w=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).formatDate=function(e){var t=new Date(e);return["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()]+" "+t.getFullYear()},a.findMovie=function(e){var t=a.state.movies.find(function(t){return t.id===e});a.props.selectMovie(t)},a.state={movies:[]},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;p.a.get("https://video-store-backend.herokuapp.com/movies").then(function(t){e.setState({movies:t.data})}).catch(function(e){console.log(e.message)})}},{key:"makeMovieList",value:function(){var e=this;return this.state.movies.map(function(t,a){return r.a.createElement(O,{key:a,id:t.id,image:t.image_url,title:t.title,overview:t.overview,releaseDate:t.release_date,inventory:1,externalId:t.external_id,findMovie:e.findMovie,dateFormatting:e.formatDate})})}},{key:"render",value:function(){return r.a.createElement("div",null,this.makeMovieList())}}]),t}(n.Component),N=function(e){var t=e.id,a=e.name,n=e.address,o=e.city,c=e.state,i=(e.postalCode,e.phone,e.findCustomer);return r.a.createElement("div",{className:"card-deck rental-card"},r.a.createElement("div",{className:"card bg-light"},r.a.createElement("div",{className:"card-body"},r.a.createElement("p",null,a),r.a.createElement("p",null,n,", ",o,", ",c),r.a.createElement("button",{className:"btn btn-primary",size:"sm",onClick:function(){i(t)},type:"button"},"Select"))))},C=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).findCustomer=function(e){var t=a.state.customers.find(function(t){return t.id===e});a.props.selectCustomer(t)},a.state={customers:[]},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;p.a.get("https://video-store-backend.herokuapp.com/customers").then(function(t){e.setState({customers:t.data})}).catch(function(e){console.log(e.message)})}},{key:"makeCustomerList",value:function(){var e=this;return this.state.customers.map(function(t,a){return r.a.createElement(N,{key:a,id:t.id,name:t.name,address:t.address,city:t.city,state:t.state,postalCode:t.postalCode,phone:t.phone,findCustomer:e.findCustomer})})}},{key:"render",value:function(){return r.a.createElement("div",null,this.makeCustomerList())}}]),t}(r.a.Component),j=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).selectCustomer=function(e){a.setState({selectedCustomer:e})},a.selectMovie=function(e){a.setState({selectedMovie:e})},a.clearSelection=function(){a.setState({selectedCustomer:void 0,selectedMovie:void 0,rentalSubmitted:!0})},a.state={selectedCustomer:void 0,selectedMovie:void 0,rentalSubmitted:!1},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(d.a,null,r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"Ada Movie Store"),r.a.createElement("section",null,r.a.createElement(g,{movie:this.state.selectedMovie,customer:this.state.selectedCustomer,clearSelection:this.clearSelection})),r.a.createElement("ul",{className:"header"},r.a.createElement("li",null,r.a.createElement(d.b,{to:"/video-store-consumer/search"},"Search")),r.a.createElement("li",null,r.a.createElement(d.b,{to:"/video-store-consumer/movies"},"Movies")),r.a.createElement("li",null,r.a.createElement(d.b,{to:"/video-store-consumer/customers"},"Customers")),r.a.createElement("li",null,r.a.createElement(d.b,{to:"/video-store-consumer/rentals"},"Rentals"))),r.a.createElement("div",{className:"content"},r.a.createElement(v.a,{path:"/video-store-consumer/search",component:b}),r.a.createElement(v.a,{path:"/video-store-consumer/movies",render:function(){return r.a.createElement(w,{selectMovie:e.selectMovie})}}),r.a.createElement(v.a,{path:"/video-store-consumer/customers",render:function(){return r.a.createElement(C,{selectCustomer:e.selectCustomer})}}),r.a.createElement(v.a,{path:"/video-store-consumer/rentals",component:y}))))}}]),t}(r.a.Component),D=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(j,null))}}]),t}(n.Component),S=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function M(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}a(277);c.a.render(r.a.createElement(D,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/video-store-consumer",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/video-store-consumer","/service-worker.js");S?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):M(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):M(e)})}}()},37:function(e,t,a){}},[[111,1,2]]]);
//# sourceMappingURL=main.79856767.chunk.js.map